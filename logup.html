<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rural Digital Education - Login/Register</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f7f5;
      margin: 0;
      padding: 0;
      color: #112;
    }
    .page { display: none; padding: 50px; max-width: 400px; margin: auto; }
    .active { display: block; }
    h2 { text-align: center; }
    form { display: flex; flex-direction: column; }
    input, select { margin: 10px 0; padding: 10px; font-size: 16px; }
    button { padding: 10px; font-size: 16px; background: #4a90e2; color: #fff; border: none; cursor: pointer; }
    button:hover { background: #357ab8; }
    a { text-align: center; margin-top: 10px; display: block; color: #4a90e2; text-decoration: none; }
    .dashboard { text-align: center; padding: 50px; }
  </style>
</head>
<body>

<!-- ------------------ LOGIN PAGE ------------------ -->
<div id="login-page" class="page active">
  <h2>Login</h2>
  <form class="auth-form">
    <input type="email" id="login-email" placeholder="Email" required>
    <input type="password" id="login-password" placeholder="Password" required>
    <button type="submit">Login</button>
  </form>
  <a href="#" id="goto-register">Don't have an account? Register</a>
</div>

<!-- ------------------ REGISTER PAGE ------------------ -->
<div id="register-page" class="page">
  <h2>Register</h2>
  <form class="auth-form">
    <input type="text" id="register-fname" placeholder="First Name" required>
    <input type="text" id="register-lname" placeholder="Last Name" required>
    <input type="email" id="register-email" placeholder="Email" required>
    <input type="password" id="register-password" placeholder="Password" required>
    <input type="password" id="register-confirm" placeholder="Confirm Password" required>
    <select id="register-role" required>
      <option value="">Select Role</option>
      <option value="student">Student</option>
      <option value="teacher">Teacher</option>
    </select>
    <button type="submit">Register</button>
  </form>
  <a href="#" id="goto-login">Already have an account? Login</a>
</div>

<!-- ------------------ STUDENT DASHBOARD ------------------ -->
<div id="student-login-page" class="page dashboard">
  <h2>Welcome Student!</h2>
  <p>You are logged in successfully.</p>
  <button id="student-logout">Logout</button>
</div>

<!-- ------------------ TEACHER DASHBOARD ------------------ -->
<div id="teacher-login-page" class="page dashboard">
  <h2>Welcome Teacher!</h2>
  <p>You are logged in successfully.</p>
  <button id="teacher-logout">Logout</button>
</div>

<!-- ------------------ SCRIPT ------------------ -->
<script>
  // ------------------ PAGE NAVIGATION ------------------
  function showPage(pageId) {
    document.querySelectorAll(".page").forEach(page => page.classList.remove("active"));
    document.getElementById(pageId).classList.add("active");
    window.scrollTo(0,0);
  }

  document.getElementById("goto-register").addEventListener("click", e => {
    e.preventDefault();
    showPage("register-page");
  });

  document.getElementById("goto-login").addEventListener("click", e => {
    e.preventDefault();
    showPage("login-page");
  });

  // ------------------ REGISTER ------------------
  const registerForm = document.querySelector("#register-page .auth-form");
  registerForm.addEventListener("submit", function(e) {
    e.preventDefault();

    const fname = document.getElementById("register-fname").value.trim();
    const lname = document.getElementById("register-lname").value.trim();
    const email = document.getElementById("register-email").value.trim();
    const password = document.getElementById("register-password").value;
    const confirm = document.getElementById("register-confirm").value;
    const role = document.getElementById("register-role").value;

    if (password !== confirm) {
      alert("Passwords do not match!");
      return;
    }

    if (!role) {
      alert("Please select a role!");
      return;
    }

    const user = { fname, lname, email, password, role };
    localStorage.setItem(email, JSON.stringify(user));

    alert("Account created successfully!");
    showPage("login-page");
    registerForm.reset();
  });

  // ------------------ LOGIN ------------------
  const loginForm = document.querySelector("#login-page .auth-form");
  loginForm.addEventListener("submit", function(e) {
    e.preventDefault();

    const email = document.getElementById("login-email").value.trim();
    const password = document.getElementById("login-password").value;

    const storedUser = JSON.parse(localStorage.getItem(email));

    if (!storedUser) {
      alert("No account found with this email!");
      return;
    }

    if (storedUser.password !== password) {
      alert("Incorrect password!");
      return;
    }

    alert("Login successful! Welcome " + storedUser.fname);
    if (storedUser.role === "teacher") {
      showPage("teacher-login-page");
    } else {
      showPage("student-login-page");
    }
    loginForm.reset();
  });

  // ------------------ LOGOUT ------------------
  document.getElementById("student-logout").addEventListener("click", () => showPage("login-page"));
  document.getElementById("teacher-logout").addEventListener("click", () => showPage("login-page"));
</script>

</body>
</html>
